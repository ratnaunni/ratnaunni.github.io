<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dog Image & Fact Generator</title>
  <style>
    html { box-sizing: border-box; }
    *, *::before, *::after { box-sizing: inherit; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      background-color: #b2d4e6; /* soft blue background */
    }

    .app {
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 600px; background-color: #fdfdfd; border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    header {
      width: 100%; font-size: 28px; text-align: center; padding: 10px;
      color: #264653; border-bottom: 1px solid #dbe1e6;
    }

    .quotes { padding: 20px 50px; min-height: 250px; text-align: center; }

    #dog-img {
      width: 100%; border-radius: 5px; margin-bottom: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .quote-text { padding-bottom: 20px; font-size: 22px; color: #2a2a2a; }

    .controls { width: 100%; padding: 20px 50px; }

    .button {
      display: block; color: white; border-radius: 4px; border: none;
      padding: 10px 20px; cursor: pointer; text-align: center; width: 100%;
      font-size: 18px; margin-bottom: 15px;
      box-shadow: 0 2px 2px 0 rgba(0,0,0,.14),
                  0 3px 1px -2px rgba(0,0,0,.2),
                  0 1px 5px 0 rgba(0,0,0,.12);
    }

    .new-dog { background-color: #2a9d8f; }
    .new-dog:hover { background-color: #21867a; }

    .new-fact { background-color: #e76f51; }
    .new-fact:hover { background-color: #c95b40; }

    @media screen and (max-width: 600px) {
      .app { width: 100%; }
      .quote-text { font-size: 18px; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>üê∂ Random Dog Generator</header>
    <div class="quotes">
      <img id="dog-img" alt="Random Dog" />
      <p id="dog-fact" class="quote-text">Click a button to see a random dog and fact!</p>
    </div>
    <div class="controls">
      <button id="js-new-dog" class="button new-dog">New Dog Image</button>
      <button id="js-new-fact" class="button new-fact">New Dog Fact</button>
    </div>
  </div>

  <script>
    const dogImg = document.querySelector('#dog-img');
    const dogFact = document.querySelector('#dog-fact');
    const dogBtn = document.querySelector('#js-new-dog');
    const factBtn = document.querySelector('#js-new-fact');

    const dogEndpoint = "https://dog.ceo/api/breeds/image/random";

    // Primary dog fact API (works in-browser): https://dogapi.dog/
    // Fallback to the Kinduff endpoint if needed.
    const factEndpoints = [
      { url: "https://dogapi.dog/api/v2/facts", parse: data => (data?.data?.[0]?.attributes?.body) },
      { url: "https://dog-api.kinduff.com/api/facts", parse: data => (data?.facts?.[0]) }
    ];

    async function newDog() {
      try {
        const response = await fetch(dogEndpoint);
        if (!response.ok) throw Error(response.statusText);
        const json = await response.json();
        dogImg.src = json.message;
      } catch (err) {
        console.error("Dog image error:", err);
        alert('Failed to fetch dog image');
      }
    }

    async function newFact() {
      // Try each endpoint until one works
      for (const ep of factEndpoints) {
        try {
          const res = await fetch(ep.url);
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          const data = await res.json();
          const fact = ep.parse(data);
          if (fact && typeof fact === 'string') {
            dogFact.textContent = fact;
            return;
          } else {
            throw new Error("Unexpected fact shape");
          }
        } catch (e) {
          console.warn(`Fact endpoint failed: ${ep.url}`, e);
          // try next endpoint
        }
      }
      dogFact.textContent = "Couldn't fetch a dog fact right now. Please try again!";
    }

    dogBtn.addEventListener('click', newDog);
    factBtn.addEventListener('click', newFact);

    // Load initial content
    newDog();
    newFact();
  </script>
</body>
</html>
